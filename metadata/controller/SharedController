{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "SharedController"
    },
    "designerId": "e97f3f02-27a1-4954-8929-fab41a60669a",
    "cn": [
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "sharedNavigateView",
                "selector": "mainpanel #sharedNavigateView"
            },
            "designerId": "297f2557-28cd-43a0-94b2-6faf08b13da8"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "sharedUploadPanel",
                "selector": "sharedUploadPanel"
            },
            "designerId": "b79e3003-63ff-4144-94ee-359cee60adc9"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "mainpanel #sharedNavigateView #sharedList",
                "designer|targetType": "Ext.dataview.List",
                "fn": "onSharedListItemTap",
                "implHandler": [
                    "var sharedNavigateView = this.getSharedNavigateView();\r",
                    "\r",
                    "//未完成的分享到达上传照片页面\r",
                    "sharedNavigateView.push({\r",
                    "    xtype: 'sharedUploadPanel',\r",
                    "    title: record.data.title,\r",
                    "    itemId: record.data\r",
                    "});\r",
                    "\r",
                    ""
                ],
                "name": "itemsingletap"
            },
            "designerId": "a8627cb7-34c2-45f7-aed8-f095c99bec11"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "sharedUploadPanel #finishBtn",
                "designer|targetType": "Ext.Button",
                "fn": "onFinishBtnTap",
                "implHandler": [
                    "//更新任务完成情况和已分享列表信息，并返回上级页面\r",
                    "var historyId = button.getParent().getParent().getItemId().oid,\r",
                    "    user = mobile.view.MyUtils.getUserInfo();\r",
                    "\r",
                    "button.setDisabled(true);\r",
                    "\r",
                    "var successCallback = function(resp, ops) {\r",
                    "    var result = resp.responseText;\r",
                    "    if(result === 'success'){\r",
                    "        Ext.getStore('SharedStore').loadPage(1, {\"start\":\"0\"}, this);\r",
                    "        mobile.view.MyUtils.updateTaskCount();\r",
                    "\r",
                    "        Ext.Msg.alert(\"提示\", '提交成功');\r",
                    "    }\r",
                    "};\r",
                    "\r",
                    "var failureCallback = function(resp, ops) {\r",
                    "    button.setDisabled(false);\r",
                    "    Ext.Msg.alert(\"提示\", '网络连接超时');\r",
                    "};\r",
                    "\r",
                    "Ext.Ajax.request({\r",
                    "    url: \"/weixin/mobile/shared/finishShared.htm\",\r",
                    "    params: {\"historyId\": historyId, \"consumerId\":user.consumerId},\r",
                    "    success: successCallback,\r",
                    "    failure: failureCallback\r",
                    "});\r",
                    "\r",
                    ""
                ],
                "name": "tap"
            },
            "designerId": "e29eae60-106a-4452-b6ce-f5a778c7131e"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "sharedUploadPanel #openUrl",
                "designer|targetType": "Ext.Button",
                "fn": "onOpenUrlTap",
                "implHandler": [
                    "var contentUrl = button.getParent().getParent().getItemId().contentUrl;\r",
                    "window.open(contentUrl, '_system');"
                ],
                "name": "tap"
            },
            "designerId": "53f60bb4-1732-4373-ae73-dda13be354ed"
        }
    ]
}